@baseUrl = http://localhost:3000/api

#--- INVESTOR ---#
### Investor Register
POST {{baseUrl}}/investor
Content-Type: application/json

{
  "name": "João Silva",
  "email": "joao.silva@example.com",
  "cpf": "05886689745",
  "dateOfBirth": "1990-01-01",
  "password": "#umaSenhaMuitoSegura123"
}

### Investor Login
# @name login
POST {{baseUrl}}/investor/auth
Content-Type: application/json

{
  "email": "joao.silva@example.com",
  "password": "#umaSenhaMuitoSegura123"
}

###
@accessToken = {{login.response.body.accessToken}}

### Get Investor Profile
# @name profile
GET {{baseUrl}}/investor/profile
Authorization: Bearer {{accessToken}}
Content-Type: application/json

###
@investorId = {{profile.response.body.data.id}}

### Update Investor Profile
PATCH {{baseUrl}}/investor/{{investorId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "João Silva Updated",
  "email": "joao.updated@example.com"
}

### Deactivate Account
PATCH {{baseUrl}}/investor/{{investorId}}/deactivate
Authorization: Bearer {{accessToken}}


#--- ASSET ---#
### Criar um Ativo (Asset)
POST {{baseUrl}}/asset
Content-Type: application/json

{
"symbol": "ITUB4",
"name": "Itaú Unibanco PN",
"assetType": "Stock",
"sector": "FINANCIAL_SERVICES",
"exchange": "B3",
"currency": "BRL"
}

###
@assetId = {{ITUB4.response.body.data.id}}

### List Assets with Search
GET {{baseUrl}}/asset?search=ITUB&page=1&limit=10
Content-Type: application/json

### Get Asset by ID
# Replace {assetId} with actual asset ID
GET {{baseUrl}}/asset/{assetId}
Content-Type: application/json

### Get Asset by Symbol
# @name ITUB4
GET {{baseUrl}}/asset/symbol/ITUB4
Content-Type: application/json

### Update Asset
# Replace {assetId} with actual asset ID
PATCH {{baseUrl}}/asset/{assetId}
Content-Type: application/json

{
  "name": "Itaú Unibanco PN Updated",
  "sector": "BANKING"
}

#--- PORTFÓLIO ---#
### Criar um Portfólio
# Você precisa de um token de autenticação para essa e as próximas rotas
POST {{baseUrl}}/portfolio
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Meu Primeiro Portfólio",
  "description": "Portfólio para investimentos em renda variável."
}

### Get All Portfolios
GET {{baseUrl}}/portfolio
Authorization: Bearer {{accessToken}}

###
@portfolioId = 5ab27abc-783b-4dc2-b3c6-eab58a1d458c

### Get Portfolio by ID
# Replace {portfolioId} with actual portfolio ID
GET {{baseUrl}}/portfolio/{{portfolioId}}
Authorization: Bearer {{accessToken}}

### Add Investment to Portfolio
# Replace {assetId} with actual asset ID
POST {{baseUrl}}/portfolio/investment/{{assetId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "quantity": 100,
  "currentPrice": 32.50
}

### Get Investment by Asset
# Replace {assetId} with actual asset ID
GET {{baseUrl}}/portfolio/investment/{assetId}
Authorization: Bearer {{accessToken}}

### Get All Investments with Pagination
GET {{baseUrl}}/portfolio/investments?page=1&limit=10
Authorization: Bearer {{accessToken}}

### Update Investment After Transaction
# Replace {transactionId} with actual transaction ID
PATCH {{baseUrl}}/portfolio/investment/{{transactionIdOnly}}/update
Authorization: Bearer {{accessToken}}

#--- TRANSACTIONS ---#
@transactionId = {{Transaction.response.headers.Location}}
@transactionIdOnly = 25becd0b-0049-4185-a54f-6107ae33544b

### Criar uma Transação de Compra (Buy)
# @name Transaction
POST {{baseUrl}}/transactions/buy/{{assetId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
"quantity": 100,
"price": 32.50,
"fees": 2.50,
"dateAt": "2023-11-20T10:00:00Z"
}

### Criar uma Transação de Venda (Sell)
POST {{baseUrl}}/transactions/sell/{{assetId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
"quantity": 50,
"price": 33.00,
"fees": 1.50,
"dateAt": "2023-11-25T11:00:00Z"
}

### Criar uma Transação de Dividendo (Dividend)
POST {{baseUrl}}/transactions/dividend/{{assetId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
"quantity": 50,
"price": 33.00,
"fees": 1.50,
"dateAt": "2023-11-25T11:00:00Z"
}

### Get All Transactions with Pagination
GET {{baseUrl}}/transactions?page=1&limit=10
Authorization: Bearer {{accessToken}}

### Get Transaction by ID
# Replace {transactionId} with actual transaction ID
GET {{baseUrl}}/transactions/{transactionId}
Authorization: Bearer {{accessToken}}

### Get Transaction Summary
# Optional: add ?assetId={assetId} to filter by specific asset
GET {{baseUrl}}/transactions/summary
Authorization: Bearer {{accessToken}}

### Get Transaction Summary by Asset
# Replace {assetId} with actual asset ID
GET {{baseUrl}}/transactions/summary?assetId={assetId}
Authorization: Bearer {{accessToken}}

### Update Transaction
# Replace {transactionId} with actual transaction ID
PUT {{baseUrl}}/transactions/{transactionId}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "quantity": 75,
  "price": 32.75,
  "fees": 2.00
}

#--- GOAL ---#
### Criar uma Meta (Goal)
@goal_id = {{goal_id}}
POST {{baseUrl}}/goals
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Comprar Carro",
  "description": "Economizar para comprar um carro novo.",
  "targetAmount": 50000,
  "targetDate": "2025-12-31T23:59:59Z",
  "priority": "High"
}

### Obter Todas as Metas
GET {{baseUrl}}/goals
Authorization: Bearer {{accessToken}}

### Obter uma Meta Específica
GET {{baseUrl}}/goals/{{goal_id}}
Authorization: Bearer {{accessToken}}

### Atualizar uma Meta
PUT {{baseUrl}}/goals/{{goal_id}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Comprar Carro (Atualizado)",
  "description": "Economizar para um carro mais econômico.",
  "targetAmount": 45000,
  "targetDate": "2025-12-31T23:59:59Z",
  "priority": "Medium"
}

### Marcar Meta como Alcançada
PATCH {{baseUrl}}/goals/{{goal_id}}/achieve
Authorization: Bearer {{accessToken}}

### Marcar Meta como Cancelada
PATCH {{baseUrl}}/goals/{{goal_id}}/cancel
Authorization: Bearer {{accessToken}}

### Buscar Progresso da Meta
GET {{baseUrl}}/goals/progress
Authorization: Bearer {{accessToken}}